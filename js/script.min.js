function wowTokenAjax(){return $.ajax({dataType:"json",url:"https://wowtoken.info/snapshot.json",success:function(e){},error:function(e,t,n){console.log("AJAX Error: "),console.log(t),console.log(n)}})}function shopAjax(){return $.ajax({dataType:"json",url:"items.json",success:function(e){},error:function(e,t,n){console.log("AJAX Error: "),console.log(t),console.log(n)}})}function countriesAjax(){return $.ajax({dataType:"json",url:"countries.json",success:function(e){},error:function(e,t,n){console.log("AJAX Error: "),console.log(t),console.log(n)}})}function getTokenPrice(e,t){return t?tokenData[e].raw.buy:tokenData[e].formatted.buy}function updateTokenPriceDisplay(e){var t=getTokenPrice(e,!1);return $("#currentValue").text(t),t}function computeTokensNeeded(e,t){for(var n in t)if(t.hasOwnProperty(n))for(var o=t[n].table,a=0;a<o.length;++a){var r=o[a];r[3]=Math.ceil(r[1]/15),r[2]=r[3]*e}}function insertTables(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t].table;$("#tables").append($("<div/>").addClass("row").append($("<div/>").addClass("col-md-12").append($("<h2/>").text(e[t].title)).append($("<table/>").attr("id",t).addClass("table table-striped table-bordered table-hover").append($("<thead/>").append($("<tr/>").append($("<th/>").text("Item")).append($("<th/>").text("Cost ($)")).append($("<th/>").text("Gold Needed")).append($("<th/>").text("Tokens Needed")))).append($("<tbody/>"))))),initDataTable(t,n)}}function initDataTable(e,t){$("#"+e).DataTable(dataTableProps(t))}function dataTableProps(e){return{columns:[{title:"Item",name:"item"},{title:"Cost ($)",name:"cost",render:function(e){return e.toFixed(2)}},{title:"Gold",name:"gold",defaultContent:0,render:function(e){return e.format()}},{title:"Tokens Needed",name:"tokens",defaultContent:0}],data:e,info:!1,paging:!1,searching:!1}}var tokenData,shopData,countriesData;$(document).ready(function(){$.when(wowTokenAjax(),shopAjax(),countriesAjax()).done(function(e,t,n){var o,a;tokenData=e[0],shopData=t[0],countriesData=n[0],console.log(countriesData),o=$("#region").val(),a=getTokenPrice(o,!0),updateTokenPriceDisplay(o),computeTokensNeeded(a,shopData),$("#loading").fadeOut(500,function(){insertTables(shopData)})}),$("#region").change(function(){currRegion=$("#region").val(),tokenPrice=getTokenPrice(currRegion,!0),updateTokenPriceDisplay(currRegion),computeTokensNeeded(tokenPrice,shopData),$.fn.dataTable.tables({visible:!0,api:!0}).rows().invalidate()})});