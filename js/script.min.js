function wowTokenAjax(){return $.ajax({dataType:"json",url:"https://wowtoken.info/snapshot.json",success:function(e){},error:function(e,o,n){console.log("AJAX Error: "),console.log(o),console.log(n)}})}function shopAjax(){return $.ajax({dataType:"json",url:"items.json",success:function(e){},error:function(e,o,n){console.log("AJAX Error: "),console.log(o),console.log(n)}})}function countriesAjax(){return $.ajax({dataType:"json",url:"countries.json",success:function(e){},error:function(e,o,n){console.log("AJAX Error: "),console.log(o),console.log(n)}})}function getTokenPrice(e,o){return o?tokenData[e].raw.buy:tokenData[e].formatted.buy}function updateTokenPriceDisplay(e){var o=getTokenPrice(e,!1);return $("#currentValue").text(o),o}function computeTokensNeeded(e,o){for(var n in o)if(o.hasOwnProperty(n))for(var t=o[n],a=0;a<t.length;++a){var r=t[a];r[3]=Math.ceil(r[1]/15),r[2]=r[3]*e}}function initDataTables(e,o){$("#gameTime").DataTable({columns:dataTableColumns(),data:o.gameTime,info:!1,paging:!1,searching:!1}),$("#charServices").DataTable({columns:dataTableColumns(),data:o.charServices,info:!1,paging:!1,searching:!1})}function dataTableColumns(){return[{title:"Item",name:"item"},{title:"Cost ($)",name:"cost",render:function(e){return e.toFixed(2)}},{title:"Gold",name:"gold",defaultContent:0,render:function(e){return e.format()}},{title:"Tokens Needed",name:"tokens",defaultContent:0}]}var tokenData,shopData,countriesData;$(document).ready(function(){$.when(wowTokenAjax(),shopAjax(),countriesAjax()).done(function(e,o,n){var t,a;tokenData=e[0],shopData=o[0],countriesData=n[0],console.log(countriesData),t=$("#region").val(),a=getTokenPrice(t,!0),updateTokenPriceDisplay(t),computeTokensNeeded(a,shopData),initDataTables(tokenData,shopData)}),$("#region").change(function(){currRegion=$("#region").val(),tokenPrice=getTokenPrice(currRegion,!0),updateTokenPriceDisplay(currRegion),computeTokensNeeded(tokenPrice,shopData),$("#charServices").DataTable().rows().invalidate()})});